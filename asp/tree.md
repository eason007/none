# 无限分级树

常见的多级树，数据表设计一般是这样的：

id | name   | pre_id
---|--------|----
1  | A      | 0
2  | A_1    | 1
3  | B      | 0
5  | B_1    | 6
6  | A_2    | 1
10 | C      | 0
12 | A_1_1  | 2

除了完整展示这个树结构时，需要用到又浪费时间又浪费性能的递归；指定某个节点，需要往上找出所有根茎节点，也会碰到类似的问题。而且在递归里还会产生多次SQL查询。这也是程序猿常见会踩的一个坑。

有什么比较好的办法吗？

介绍一个咯。所有场景，一次SQL查询，一个循环解决。

id | name   | code
---|--------|-------------
1  | A      | 0001
2  | A_1    | 00010001
3  | B      | 0002
5  | B_1    | 00020001
6  | A_2    | 00010002
10 | C      | 0003
12 | A_1_1  | 000100010001

select id,name,code from tab_1 order by code asc;

然后在一个循环里就可以根据code判断出所有的归属关系了。

^_^!
